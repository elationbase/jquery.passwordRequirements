/*
 * jQuery Minimun Password Requirements 1.2
 * http://elationbase.com
 * Copyright 2014, elationbase
 * Check Minimun Password Requirements
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Modified by: Misteregis <misteregis@gmail.com>
 * Modified date: 2022/10/20
*/
(function($){$.fn.passwordRequirements=function(options){return options=$.extend($.fn.passwordRequirements.defaults,options),this.each(function(){var o=options,$this=this,info=o.infoMessageTextArray,infoMessage="",infoToUse={};for(var opt in infoMessage=info.minCharacters.replace("{0}",o.minCharacters||o.numCharacters),o.maxCharacters&&(infoMessage+=" "+info.maxCharacters.replace("{0}",o.maxCharacters)),o)["minCharacters","maxCharacters"].includes(opt)||info.hasOwnProperty(opt)&&o[opt]&&!infoToUse.hasOwnProperty(opt)&&(infoToUse[opt]=info[opt].replace("{0}",o[opt]));if(infoToUse=Object.values(infoToUse),infoToUse.length){var last=infoToUse[0],at_least=last;infoToUse.length>1&&(last=infoToUse.pop(),at_least=infoToUse.join(", ")+info.and+last),infoMessage+=" "+info.mustContain+" "+at_least}infoMessage+=".",this.passwordRequirements={infoMessage:infoMessage};var lis=[],toCheck={};if($(["numCharacters","useLowercase","useUppercase","useNumbers","useSpecial"]).each(function(e,s){o[s]&&(lis.push($("<li/>",{class:"pr-"+s,html:"<span></span>"+o[s+"Text"]})),toCheck[s+"Done"]=!1)}),lis.length){var toCheckTotal=Object.keys(toCheck).length,checked=function(){return Object.values(toCheck).filter(e=>!0===e).length===toCheckTotal},showMessage=function(){checked()||$(".pr-password").each(function(){var e="pr-box-"+$(".pr-password").index($this);if(!$("#"+e).length){var s=$("<em/>"),a=$("<ul/>").append(lis),t=$("<p/>",{text:$this.passwordRequirements.infoMessage}),r=$("<div/>",{class:"pr-box-inner"}).append([t,a]),n=$("<div/>",{id:e,class:"pr-box"}).append([s,r]);n.get(0)._element=$this,n.get(0).updatePos=function(){var e=$(this._element).offset().top,s=$(this._element).innerHeight(),a=e+s,t=$(this._element).offset().left;$(this).css({top:a,left:t})},$(".pr-box").remove(),$("body").append(n),n.addClass(o.style).fadeIn(o.fadeTime).get(0).updatePos(),scroll({top:$this.offsetTop,behavior:"smooth"})}})};$(this).on("focus",showMessage);var deleteMessage=function(){$(".pr-box").fadeOut(o.fadeTime,function(){$(this).remove()})},checkCompleted=function(){checked()?deleteMessage():showMessage(),checked()};$(this).on("blur",deleteMessage);var range={min:o.minCharacters||o.numCharacters,max:o.maxCharacters||""},regex={useSpecial:/[,!%&@#$^*?_~=]/,useNumbers:/\d/,useLowercase:/[a-z]/,useUppercase:/[A-Z]/,numCharacters:eval("/^(?=.{"+range.min+","+range.max+"}$).+/")},pattern="";for(var key in regex)if(o[key]){var rgx=regex[key].source;pattern+=rgx.includes("(")?rgx:"(?=.*"+rgx+")"}pattern&&$(this).attr({maxlength:o.maxCharacters,minlength:range.min,pattern:pattern}),$(this).on("input focus",function(e){for(var s in toCheck){var a=null!==$(this).val().match(regex[s.slice(0,-4)]),t=a?"addClass":"removeClass";toCheck[s]=a,checkCompleted(),$(".pr-"+s.slice(0,-4)+" span")[t]("pr-ok")}})}})},$.fn.passwordRequirements.getPos=function(e){var s=$(e).offset().top,a=$(e).innerHeight(),t=s+a,o=$(e).offset().left;return{top:t,left:o}},$.fn.passwordRequirements.defaults={numCharacters:8,minCharacters:null,maxCharacters:null,useLowercase:!0,useUppercase:!0,useNumbers:!0,useSpecial:!0,style:"light",fadeTime:300},$.fn.passwordRequirements.locales=[],$.fn.passwordRequirements.locales.en={infoMessageTextArray:{minCharacters:"The minimum password length is {0} characters",maxCharacters:"and the maximum is {0} characters",mustContain:"and must contain at least",useLowercase:"1 lowercase letter",useUppercase:"1 capital letter",useNumbers:"1 number",useSpecial:"1 special character",and:" and "},numCharactersText:"# of characters",useLowercaseText:"Lowercase letter",useUppercaseText:"Capital letter",useNumbersText:"Number",useSpecialText:"Special character"},$.extend($.fn.passwordRequirements.defaults,$.fn.passwordRequirements.locales.en),$(window).resize(function(){$(".pr-box").length&&$(".pr-box").get(0).updatePos()})})(jQuery);